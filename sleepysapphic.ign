{
  "ignition": {
    "version": "3.1.0"
  },
  "passwd": {
    "groups": [
      {
        "gid": 777,
        "name": "znc",
        "system": true
      }
    ],
    "users": [
      {
        "name": "core",
        "sshAuthorizedKeys": [
          "$pubkey"
        ]
      },
      {
        "homeDir": "/var/lib/znc",
        "name": "znc",
        "noCreateHome": true,
        "shell": "/usr/bin/nologin",
        "system": true,
        "uid": 777
      }
    ]
  },
  "storage": {
    "directories": [
      {
        "group": {
          "id": 777
        },
        "path": "/var/lib/znc",
        "user": {
          "id": 777
        },
        "mode": 448
      },
      {
        "group": {
          "id": 777
        },
        "path": "/var/lib/znc/.znc",
        "user": {
          "id": 777
        },
        "mode": 448
      },
      {
        "group": {
          "id": 777
        },
        "path": "/var/lib/znc/.znc/configs",
        "user": {
          "id": 777
        },
        "mode": 448
      }
    ],
    "files": [
      {
        "path": "/etc/hostname",
        "contents": {
          "source": "data:,sleepysapphic%0A"
        },
        "mode": 420
      },
      {
        "path": "/etc/profile.d/systemd-pager.sh",
        "contents": {
          "source": "data:,%23%20Tell%20systemd%20to%20not%20use%20a%20pager%20when%20printing%20information%0Aexport%20SYSTEMD_PAGER%3Dcat%0A"
        },
        "mode": 420
      },
      {
        "path": "/etc/sysctl.d/20-silence-audit.conf",
        "contents": {
          "source": "data:,%23%20Raise%20console%20message%20logging%20level%20from%20DEBUG%20(7)%20to%20WARNING%20(4)%0A%23%20to%20hide%20audit%20messages%20from%20the%20interactive%20console%0Akernel.printk%3D4%0A"
        },
        "mode": 420
      },
      {
        "path": "/usr/local/bin/public-ipv4.sh",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/0xOvWrDMBDe7ymuVEM89CSH/oCJu7VrH6HIFyELZJ2JlA4NefdyTQiZpO//Hh/slIqdfJ0hrT/Po9nw8ZBxbm2tg7XKUWJfZv+bVmJZOshS4vcstY1mE0MLpaGiikbdHVwl9g1taGwVF7+EDvay+FTGiSmKxByONRxYilZoNWjk/ZapuNs94cfXJ/TbN3LkqMcs7LOKMAz36H8ajf7RnPQ5kzld9s5obidD76h/eSVHW4c1+L3EO9+FAJ38CwAA///UFyaDGQEAAA=="
        },
        "mode": 493
      },
      {
        "path": "/var/lib/znc/.znc/configs/znc.conf",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/4STX4vTQBDA3/MpBu5RmnBwtCppwT8Pp9RyWPRF5Bh3p83SzWyYmfRaP71sa1Rao32b+f3mDzvNZxINiWEOt+Xz8raol0GNmATiogB4SGIwh9lsNisA3j3s72AOJj2do+nvaL1eDkFdDU0WRVF/UhLARCH3e+XbwHD6/apcBbeDIZfF7EUb0ufcYx7oie1C/EgYV9jSKfc+ITPC23SMBF8as05fVtU2WNN/K11qq1x00O93XwuA14H9fVI7VWok6o6KXdcEVwAsE/oPyfeRYA6uQVbck1yBxCYpdsgUL5mGtov0iE94vEKoWa9XZE9JdrARIk6e8gMBrEn2JOexVg6sZDJ4Np2+mJ2k+k2DDDc3TNag2018UJfEnzvUVaaLv4p7lIBsOm5KrzZKUR1x/sOU0vOoRW2pEbWhtmxp1NqQT4ITl4SS/s9qiSzwdnI7KjYofpP6bTO+/YrsHt1ulHOjE0/7UW6ErXYRrybU1c9bLv686+kNmOzirkFcOaAyyfb6rEqH0R0OO+cnJsj6jyXqKn91i+JHAAAA//9qksDT3gMAAA=="
        },
        "mode": 384
      },
      {
        "path": "/var/lib/containers/gpg-key.pub",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,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"
        },
        "mode": 420
      },
      {
        "path": "/etc/containers/registries/20-local-sigserv.yaml",
        "contents": {
          "source": "data:;base64,bmVpZ2hib3VyOgogIHNpZ3N0b3JlOiBodHRwOi8vbG9jYWxob3N0OjgwMDAKICBzaWdzdG9yZS1zdGFnaW5nOiBmaWxlOi8vL3Zhci9saWIvem5jL3NpZ3N0b3JlCg=="
        },
        "mode": 420
      },
      {
        "path": "/usr/local/bin/http-sigs.sh",
        "contents": {
          "source": "data:,%23!%2Fbin%2Fbash%0Acd%20%2Fvar%2Flib%2Fcontainers%2Fsigstore%0Apython3%20-m%20http.service%0A"
        },
        "mode": 493
      },
      {
        "path": "/etc/subuid",
        "contents": {
          "source": "data:,znc%3A100000%3A65536%0A"
        },
        "mode": 420
      },
      {
        "path": "/etc/subgid",
        "contents": {
          "source": "data:,znc%3A100000%3A65536%0A"
        },
        "mode": 420
      },
      {
        "path": "/etc/containers/policy.json",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/3TPsU7EMAwG4L1PYXnu0S4s3Y7lBpYb2FCHNDVp1MOJEhcpqvLuKOEKSIghUZT/9yd5bwBwpje13QQHeIUdJXnCAdByJL0FOmtNXs6cZLFsMMPYliEJiqN3QSIODUCBCuX0SuE0K3p3XAOAHbDQh/wvPEJuvxQma5bJbeEQ6g2AkdTszPDY930h798/hVo6FojWMM1PCdvf6Urp5V64XC/PlOKf/KpkKXn3oUJ3s1OnHYuyTCF2xpvTSunBbxN+j2UY6zs35eTmMwAA//8GgB2uVgEAAA=="
        },
        "mode": 493
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "dropins": [
          {
            "contents": "[Service]\n# Override Execstart in main unit\nExecStart=\n# Add new Execstart with `-` prefix to ignore failure\nExecStart=-/usr/sbin/agetty --autologin core --noclear %I $TERM\nTTYVTDisallocate=no\n",
            "name": "autologin-core.conf"
          }
        ],
        "name": "serial-getty@ttyS0.service"
      },
      {
        "contents": "[Service]\nType=oneshot\nExecStart=/usr/bin/false\nRemainAfterExit=yes\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "failure.service"
      },
      {
        "contents": "[Unit]\nBefore=console-login-helper-messages-issuegen.service\nAfter=network-online.target\nConditionPathExists=!/var/lib/issuegen-public-ipv4\n\n[Service]\nType=oneshot\nExecStart=/usr/local/bin/public-ipv4.sh\nExecStartPost=/usr/bin/touch /var/lib/issuegen-public-ipv4\nRemainAfterExit=yes\n\n[Install]\nWantedBy=console-login-helper-messages-issuegen.service\n",
        "enabled": true,
        "name": "issuegen-public-ipv4.service"
      },
      {
        "contents": "[Unit]\nBefore=znc.service\nAfter=network-online.target\nWants=network-online.target\n\n[Service]\nExecStart=/usr/local/bin/http-sigs.sh\nExecStop=killall http-sigs.sh\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "http-sigs.service"
      },
      {
        "contents": "[Unit]\nDescription=ZNC IRC bouncer daemon\nAfter=network-online.target\nWants=network-online.target\n\n[Service]\nUser=znc\nExecStartPre=-/bin/podman kill znc\nExecStartPre=-/bin/podman rm znc\nExecStartPre=/bin/podman pull --tls-verify=false seadog:5000/znc\nExecStart=/bin/podman run --name znc --net=host --rm \\\n  --volume znc-data:/var/lib/znc --user znc:znc --publish 7777 \\\n  /usr/bin/znc --follow --makepem --makepass\nExecStop=/bin/podman stop znc\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "znc.service"
      }
    ]
  }
}
